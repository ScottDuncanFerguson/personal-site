(self.webpackChunkscott_personal_site=self.webpackChunkscott_personal_site||[]).push([[938],{41349:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ee});var o=n(67294);const r="btn--1XbEc-_7";n(21249),n(15267);var a=n(64713),s=n(6559),c=n(32051),l=n(24842),i=n(18286);const d=(0,s.Pi)((function(){var e=(0,c.Z)().socketStore;return o.createElement(a.default.Group,{onChange:function(t){var n=t.target.value;e.setSocketType(n),localStorage.setItem(l.$c.SOCKET_TYPE,n)},value:e.socketType,disabled:e.socketIsConnected},i.F9.map((e=>o.createElement(a.default.Button,{value:e,key:e},e))))}));n(35797);var u=n(64749);const m=(0,s.Pi)((function(){var e=(0,c.Z)().socketStore;return o.createElement(u.default,{value:e.dataFormat,style:{width:120},onChange:function(t){e.setDataFormat(t),localStorage.setItem(l.$c.DATA_FORMAT,t)}},i.iL.map((e=>o.createElement(u.default.Option,{key:e,value:e},e))))}));n(82526),n(41817),n(66992),n(41539),n(33948),n(1025);var f=n(65400),v=(n(7940),n(31059)),k=(n(89858),n(51024)),h=(n(75314),n(11187)),p=n(85821),g=n(86809),S=n.n(g),y=n(67086),E=n.n(y),b=n(68949),w=E()(S().Manager),C=new class{constructor(){this.socket=void 0}send(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.socket&&this.socket.connected?this.socket.emit(e,t):n<3&&setTimeout((()=>{this.send(t,n++)}),300)}open(e){var t=["websocket"];p.socketStore.notSupportPolling||t.unshift("polling"),this.socket=S().connect(e,{reconnectionDelay:1e3,reconnection:!0,reconnectionAttempts:5,transports:t}),w(this.socket),(0,b.reaction)((()=>p.socketStore.socketType),((e,t,n)=>{this.socket.close(),n.dispose()})),this.socket.on("reconnect",(e=>{var t=`socket reconnect after attempt ${e} times !!!`;p.socketStore.addMessage({event:"reconnect",from:"console",data:t})})),this.socket.on("disconnect",(e=>{p.socketStore.setSocketIsConnected(!1);var t=`socket disconnect because: ${e} !!!`;p.socketStore.addMessage({event:"disconnect",from:"console",data:t})})),this.socket.on("connect_timeout",(e=>{var t=`socket connect_timeout: ${e} !!!`;p.socketStore.addMessage({event:"connect_timeout",from:"console",data:t})})),this.socket.on("connect_error",(e=>{p.socketStore.addMessage({event:"connect_error",from:"console",data:"socket connect_error !!!"}),console.warn(e)})),this.socket.on("error",(e=>{p.socketStore.setSocketIsConnected(!1),p.socketStore.addMessage({event:"error",from:"console",data:"socket error !!!"}),console.warn(e)})),this.socket.on("connect",(()=>{p.socketStore.setSocketIsConnected(!0),p.socketStore.addMessage({event:"connect",from:"console",data:"socket connected !!!"})})),this.socket.on("ping",(()=>{p.socketStore.addMessage({event:"ping",from:"browser",data:null})})),this.socket.on("pong",(()=>{p.socketStore.addMessage({event:"pong",from:"server",data:null})})),this.socket.on("*",(e=>{if(console.log("on all socket callback: ",e),e&&e.data instanceof Array&&e.data.length>1){var t=e.data[0],n=e.data[1];p.socketStore.addMessage({event:t,from:"server",data:n})}}))}};var I=n(26729),O=null,N=!1;class T extends I.EventEmitter{constructor(){super(),this.onopen=void 0,this.onmessage=void 0,this.conn=null,this.run()}run(){this.onopen=()=>{p.socketStore.setSocketIsConnected(!0),p.socketStore.addMessage({event:"connect",from:"console",data:"socket connected !!!"})},this.onmessage=e=>{e&&e.data&&p.socketStore.addMessage({event:"message",from:"server",data:"object"==typeof e.data?JSON.stringify(e.data):e.data})}}send(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.conn&&this.conn.readyState===this.conn.OPEN?this.conn.send("object"==typeof e?JSON.stringify(e):e):t<3&&setTimeout((()=>{this.send(e,t++)}),300)}open(e){return this.conn=new WebSocket(e),this.conn.onclose=t=>{p.socketStore.setSocketIsConnected(!1);var n=`socket close: ${"object"==typeof t?t.code:""}`;p.socketStore.addMessage({event:"close",from:"console",data:n}),clearTimeout(O),N||(O=window.setTimeout((()=>{this.open(e)}),3e3)),N=!1},this.conn.onerror=e=>{p.socketStore.setSocketIsConnected(!1);var t=`socket error: ${"object"==typeof e?JSON.stringify(e.code):""}`;p.socketStore.addMessage({event:"error",from:"console",data:t})},(0,b.reaction)((()=>p.socketStore.socketType),((e,t,n)=>{clearTimeout(O),n.dispose()})),this.onopen&&(this.conn.onopen=this.onopen),this.onmessage&&(this.conn.onmessage=this.onmessage),this}}var _=new T;var M=()=>p.socketStore.isSocketIO?void(C.socket&&C.socket.connected&&C.socket.close()):(_.conn&&_.conn.readyState===_.conn.OPEN&&_.conn.close(),void(N=!0)),P=(e,t)=>p.socketStore.isSocketIO?function(e,t){if(!C.socket||!C.socket.connected)return h.default.error("Please connect to server!!!");C.send(e,t),p.socketStore.addMessage({event:e,from:"browser",data:t})}(e,t):function(e,t){if(!_.conn&&_.conn.readyState!==_.conn.OPEN)return h.default.error("Please connect to server!!!");_.send(t),p.socketStore.addMessage({event:null,from:"browser",data:t})}(0,t);function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}const j=(0,s.Pi)((function(){var e,t,n=(0,c.Z)().socketStore,a=(e=o.useState(localStorage.getItem(l.$c.SOCKET_URL)),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,a=void 0;try{for(var s,c=e[Symbol.iterator]();!(o=(s=c.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],i=a[1];return o.createElement("div",{className:"container--tmDn9tpw"},o.createElement("div",{className:"connect--2JHT-tN9"},o.createElement(k.Z,{className:"socketUrlInput--1peQ6HT-",value:s,onChange:function(e){var t=e.target.value;i(t),localStorage.setItem(l.$c.SOCKET_URL,t)}}),n.isSocketIO&&o.createElement(v.default,{disabled:n.socketIsConnected,className:"checkbox--TRo2rgKB btn--1XbEc-_7",checked:n.notSupportPolling,onChange:e=>n.setNotSupportPolling(e.target.checked)},"no polling"),o.createElement(f.default,{className:r,type:"primary",onClick:function(){if(!s)return h.default.destroy(),h.default.error("Please input socket url!");(e=>{p.socketStore.isSocketIO?function(e){if(C.socket&&C.socket.connected)return h.default.error("Please disconnect the existing instance!!!");C.open(e)}(e):function(e){if(_.conn&&_.conn.readyState===_.conn.OPEN)return h.default.error("Please disconnect the existing instance!!!");_.open(e)}(e)})(s),n.clearMessages()},disabled:n.socketIsConnected},"connect"),o.createElement(f.default,{className:r,danger:!0,onClick:M,disabled:!n.socketIsConnected},"disconnect")),o.createElement("blockquote",{className:"tips--2ukdBBUO"},"protocol//ip or domain:host (example:",n.isSocketIO?" wss://showcase.jackple.com":" ws://127.0.0.1:3001",")"))}));n(26699),n(47042),n(5212),n(32023),n(53294);var x=n(56697),R=(n(78994),n(35297)),Z=(n(69909),n(17669)),U=n(55171),$=n.n(U);function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,a=void 0;try{for(var s,c=e[Symbol.iterator]();!(o=(s=c.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var J=localStorage.getItem(l.$c.SOCKET_IO_EVENTS),K=J?JSON.parse(J):[];K.length>30&&(K=K.slice(0,30));const L=(0,s.Pi)((function(){var e=(0,c.Z)().socketStore,t=F(o.useState(""),2),n=t[0],r=t[1],a=F(o.useState(""),2),s=a[0],d=a[1],u=F(o.useState({}),2),m=u[0],v=u[1],p=F(o.useState(""),2),g=p[0],S=p[1],y=F(o.useState(K),2),E=y[0],b=y[1],w=F(o.useState(!1),2),C=w[0],I=w[1],O=o.useMemo((()=>!(e.isSocketIO&&!g)&&e.socketIsConnected),[e.isSocketIO,g,e.socketIsConnected]),N=o.useMemo((()=>e.dataFormat===i.iL[0]?m:s),[e.dataFormat,m,s]);function T(){I((e=>!e))}return o.createElement("div",null,e.isSocketIO&&o.createElement(Z.Z,{className:"autoComplete--2x1eKk8G",options:E,placeholder:"Input event name",value:g,onChange:e=>S(e),filterOption:(e,t)=>t.value.toUpperCase().includes(e.toUpperCase())}),e.dataFormat===i.iL[0]?o.createElement("div",{className:"content--kJcrJFU3"},o.createElement("div",{className:"reset--1YneTTTf"},o.createElement(R.Z,{placement:"topLeft",title:"Confirm to reset?",onConfirm:()=>v({})},o.createElement(f.default,null,"Reset")),o.createElement(f.default,{className:"btnCover--2-UztjI7",type:"primary",onClick:T},"Custom"),o.createElement(x.Z,{title:"Custom data",style:{top:20},visible:C,onOk:function(){try{v(JSON.parse(n)),T()}catch(e){console.error(e),h.default.destroy(),h.default.error("Please input json string!")}},onCancel:T},o.createElement(k.Z.TextArea,{placeholder:"Please input json string",autoSize:{minRows:4,maxRows:10},value:n,onChange:e=>{var t=e.target;return r(t.value)}}))),o.createElement($(),{name:!1,theme:"monokai",style:{padding:10,minHeight:150,maxHeight:500,overflow:"auto",borderRadius:3,wordWrap:"break-word",wordBreak:"break-all"},onAdd:e=>{var t=e.updated_src;return v(t)},onEdit:e=>{var t=e.updated_src;return v(t)},onDelete:e=>{var t=e.updated_src;return v(t)},src:m})):o.createElement(k.Z.TextArea,{className:"textContent--R_05KlXR",placeholder:"Input your sending content",autoSize:{minRows:4,maxRows:10},value:s,onChange:e=>{var t=e.target;return d(t.value)}}),o.createElement(f.default,{block:!0,size:"large",disabled:!O,type:"primary",onClick:function(){if(!e.isSocketIO)return P(null,N);if(!g)return h.default.destroy(),h.default.error("Please input event name!");if(!E.some((e=>e.value===g))){var t=[{value:g},...E];b(t),localStorage.setItem(l.$c.SOCKET_IO_EVENTS,JSON.stringify(t))}P(g,N)}},"Send"))})),D=function(){return o.createElement("div",{className:"handler--1KkX69_Y"},o.createElement("div",{className:"head--2SfvaVIL"},o.createElement(d,null),o.createElement(m,null)),o.createElement(j,null),o.createElement(L,null))};var z=n(78330),B=n(29940),X=n(26443);var V=n(21424),Y=(n(77785),n(59361)),G=n(30381),Q=n.n(G);const W=(0,s.Pi)((function(e){var t=e.message,n=e.style,r=Q()(t.time).format("h:mm:ss a"),a="browser"===t.from?"#87d068":"server"===t.from?"#2db7f5":"#108ee9",s="browser"===t.from?"You":"server"===t.from?"Server":"Console",c="object"==typeof t.data?JSON.stringify(t.data):t.data;return o.createElement("div",{className:"message--3UadhdfF",style:n},o.createElement("div",{className:"messageHeader--2gGHdTkv",style:{marginBottom:c?5:0}},t.event&&o.createElement(Y.Z,{color:"#f50"},t.event),o.createElement(Y.Z,{color:a},s),o.createElement("span",null,r)),o.createElement("div",{className:"content--CgRHCXan"},c))})),q=(0,s.Pi)((function(){var e=(0,c.Z)().socketStore,t=o.useRef(null),n=new B.t1({fixedWidth:!0,minHeight:43});function r(e){if(0===e)return n.clearAll();t.current&&t.current.scrollToRow(e-1)}function a(t){var r=t.index,a=t.key,s=t.parent,c=t.style,l=e.messages[r];return o.createElement(B.Z8,{cache:n,columnIndex:0,key:a,parent:s,rowIndex:r},o.createElement(W,{style:c,message:l}))}(0,V.F)((function(){return(0,b.reaction)((()=>e.messages.length),r)}));var s=e.messages.length;return o.createElement("div",{className:"browse--17QHhAaK"},o.createElement(z.q,null,(e=>{var r=e.width,c=e.height;return o.createElement(X.aV,{width:r,height:c,ref:t,overscanRowCount:0,rowCount:s,deferredMeasurementCache:n,rowHeight:n.rowHeight,rowRenderer:a})})))})),ee=function(){return o.createElement("div",{className:"container--1i6Px5Qu"},o.createElement(D,null),o.createElement(q,null))}},14920:(e,t,n)=>{var o={"./es-us":71146,"./es-us.js":71146,"./zh-cn":83839,"./zh-cn.js":83839};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=a,e.exports=r,r.id=14920},40418:()=>{}}]);
//# sourceMappingURL=socket-debugger.938.c2d30dd2a94248356dac.js.map