{"version":3,"sources":["webpack://scott-personal-site/./src/Containers/Views/Users/index.scss?1300","webpack://scott-personal-site/./src/Containers/Views/Users/UserModal.tsx","webpack://scott-personal-site/./src/Containers/Views/Users/Header/index.tsx","webpack://scott-personal-site/./src/Containers/Views/Users/Header/index.scss?5e68","webpack://scott-personal-site/./src/Containers/Views/Users/UserTable.tsx","webpack://scott-personal-site/./src/Components/AutoSizer.tsx","webpack://scott-personal-site/./src/Containers/Views/Users/index.tsx"],"names":["FormItem","formItemLayout","labelCol","xs","span","sm","wrapperCol","userCategory","observer","visible","onCancel","user","userStore","useRootStore","form","React","loading","setLoading","typeIsAdd","undefined","toggleLoading","l","values","createUser","changePageIndex","modifyUser","_id","getUsers","title","onOk","submit","okButtonProps","onFinish","initialValues","account","category","label","name","rules","required","map","c","key","value","modalVisible","setModalVisible","toggleModalVisible","className","type","onClick","scrollY","currentUser","setCurrentUser","useOnMount","style","width","bordered","rowKey","getUsersloading","dataSource","users","scroll","y","pagination","current","pageIndex","showSizeChanger","pageSize","pageSizeOptions","total","onChange","handleTableChange","dataIndex","render","_","record","styles","placement","onConfirm","deleteUser","AutoSizer","state","height","containerRef","timer","listenResize","clearTimeout","this","setTimeout","setSize","clientHeight","clientWidth","setState","setRef","ref","bindOrUnbindResize","window","addEventListener","removeEventListener","componentDidMount","componentWillUnmount","props","children","Users"],"mappings":"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","file":"static/js/users.681.5139fee09afd6480a4bf.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"container--19QlmI49\",\"tableBox\":\"tableBox--359IoN70\",\"ctrlEle\":\"ctrlEle--19VU2aF6\"};","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { Modal, Form, Input, Select } from \"antd\";\n\nimport useRootStore from \"@Store/UseRootStore\";\n\nconst FormItem = Form.Item;\n\nconst formItemLayout = {\n\tlabelCol: {\n\t\txs: { span: 24 },\n\t\tsm: { span: 5 },\n\t},\n\twrapperCol: {\n\t\txs: { span: 24 },\n\t\tsm: { span: 19 },\n\t},\n};\n\nconst userCategory = [\"user\", \"admin\"];\n\ninterface IProps {\n\tvisible: boolean;\n\tonCancel: () => void;\n\tuser?: IUserStore.IUser;\n}\n\nfunction UserModal({ visible, onCancel, user }: IProps) {\n\tconst { userStore } = useRootStore();\n\tconst [form] = Form.useForm();\n\n\tconst [loading, setLoading] = React.useState(false);\n\n\tconst typeIsAdd = user === undefined;\n\n\tfunction toggleLoading() {\n\t\tsetLoading((l) => !l);\n\t}\n\n\tasync function submit(values: IUserStore.IUser) {\n\t\ttoggleLoading();\n\t\ttry {\n\t\t\tif (typeIsAdd) {\n\t\t\t\tawait userStore.createUser(values);\n\t\t\t\tuserStore.changePageIndex(1);\n\t\t\t} else {\n\t\t\t\tawait userStore.modifyUser({ ...values, _id: user._id });\n\t\t\t\tuserStore.getUsers();\n\t\t\t}\n\t\t\tonCancel();\n\t\t} finally {\n\t\t\ttoggleLoading();\n\t\t}\n\t}\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={typeIsAdd ? \"Add User\" : \"Modify User\"}\n\t\t\tvisible={visible}\n\t\t\tonOk={form.submit}\n\t\t\tonCancel={onCancel}\n\t\t\tokButtonProps={{ loading }}\n\t\t>\n\t\t\t<Form\n\t\t\t\tform={form}\n\t\t\t\tonFinish={submit}\n\t\t\t\tinitialValues={{ account: user ? user.account : \"\", category: user ? user.category : userCategory[0] }}\n\t\t\t>\n\t\t\t\t<FormItem {...formItemLayout} label=\"account\" name=\"account\" rules={[{ required: true }]}>\n\t\t\t\t\t<Input />\n\t\t\t\t</FormItem>\n\t\t\t\t{typeIsAdd && (\n\t\t\t\t\t<FormItem {...formItemLayout} label=\"password\" name=\"password\" rules={[{ required: true }]}>\n\t\t\t\t\t\t<Input />\n\t\t\t\t\t</FormItem>\n\t\t\t\t)}\n\t\t\t\t<FormItem {...formItemLayout} label=\"category\" name=\"category\" rules={[{ required: true }]}>\n\t\t\t\t\t<Select>\n\t\t\t\t\t\t{userCategory.map((c) => (\n\t\t\t\t\t\t\t<Select.Option key={c} value={c}>\n\t\t\t\t\t\t\t\t{c}\n\t\t\t\t\t\t\t</Select.Option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Select>\n\t\t\t\t</FormItem>\n\t\t\t</Form>\n\t\t</Modal>\n\t);\n}\n\nexport default observer(UserModal);\n","import React from \"react\";\nimport { Button } from \"antd\";\n\nimport styles from \"./index.scss\";\nimport UserModal from \"./../UserModal\";\n\nfunction Header() {\n\tconst [modalVisible, setModalVisible] = React.useState(false);\n\n\tfunction toggleModalVisible() {\n\t\tsetModalVisible((visible) => !visible);\n\t}\n\n\treturn (\n\t\t<div className={styles.header}>\n\t\t\t<Button type=\"primary\" onClick={toggleModalVisible}>\n\t\t\t\tadd user\n\t\t\t</Button>\n\t\t\t<UserModal visible={modalVisible} onCancel={toggleModalVisible} />\n\t\t</div>\n\t);\n}\n\nexport default Header;\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"header--2iL2lhHi\"};","import React from \"react\";\nimport { Table, Divider, Popconfirm } from \"antd\";\nimport { observer } from \"mobx-react\";\n\nimport styles from \"./index.scss\";\nimport { useOnMount } from \"@Utils/Hooks\";\nimport useRootStore from \"@Store/UseRootStore\";\nimport UserModal from \"./UserModal\";\n\ninterface IProps {\n\tscrollY: number;\n}\n\nfunction UserTable({ scrollY }: IProps) {\n\tconst { userStore } = useRootStore();\n\n\tconst [modalVisible, setModalVisible] = React.useState(false);\n\tconst [currentUser, setCurrentUser] = React.useState<IUserStore.IUser>(null);\n\n\tfunction modifyUser(user: IUserStore.IUser) {\n\t\tsetCurrentUser(user);\n\t\tsetModalVisible(true);\n\t}\n\n\tuseOnMount(userStore.getUsers);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Table<IUserStore.IUser>\n\t\t\t\tclassName=\"center-table\"\n\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\tbordered\n\t\t\t\trowKey=\"_id\"\n\t\t\t\tloading={userStore.getUsersloading}\n\t\t\t\tdataSource={userStore.users}\n\t\t\t\tscroll={{ y: scrollY }}\n\t\t\t\tpagination={{\n\t\t\t\t\tcurrent: userStore.pageIndex,\n\t\t\t\t\tshowSizeChanger: true,\n\t\t\t\t\tpageSize: userStore.pageSize,\n\t\t\t\t\tpageSizeOptions: [\"30\", \"20\", \"10\"],\n\t\t\t\t\ttotal: userStore.total,\n\t\t\t\t}}\n\t\t\t\tonChange={userStore.handleTableChange}\n\t\t\t>\n\t\t\t\t<Table.Column<IUserStore.IUser> key=\"account\" title=\"Account\" dataIndex=\"account\" width={200} />\n\t\t\t\t<Table.Column<IUserStore.IUser> key=\"category\" title=\"Category\" dataIndex=\"category\" width={100} />\n\t\t\t\t<Table.Column<IUserStore.IUser> key=\"createdAt\" title=\"CreatedAt\" dataIndex=\"createdAt\" width={200} />\n\t\t\t\t<Table.Column<IUserStore.IUser>\n\t\t\t\t\tkey=\"action\"\n\t\t\t\t\ttitle=\"Action\"\n\t\t\t\t\twidth={120}\n\t\t\t\t\trender={(_, record) => (\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<span className={styles.ctrlEle} onClick={() => modifyUser(record)}>\n\t\t\t\t\t\t\t\tModify\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<Divider type=\"vertical\" />\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确认删除?\" onConfirm={() => userStore.deleteUser(record._id)}>\n\t\t\t\t\t\t\t\t<span className={styles.ctrlEle}>Delete</span>\n\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t</Table>\n\t\t\t<UserModal visible={modalVisible} onCancel={() => setModalVisible(false)} user={currentUser} />\n\t\t</React.Fragment>\n\t);\n}\n\nexport default observer(UserTable);\n","import React from \"react\";\n\ninterface Size {\n\twidth: number;\n\theight: number;\n}\n\ninterface IP {\n\tclassName?: string;\n\tstyle?: React.CSSProperties;\n\tchildren?: (props: Size) => React.ReactNode;\n}\n\ninterface IS {\n\theight: number;\n\twidth: number;\n}\n\nclass AutoSizer extends React.Component<IP, IS> {\n\tstate = { height: 0, width: 0 };\n\n\tprivate containerRef: HTMLDivElement = null;\n\tprivate timer: NodeJS.Timer = null;\n\n\tlistenResize = () => {\n\t\tclearTimeout(this.timer);\n\t\tthis.timer = setTimeout(() => {\n\t\t\tthis.setSize();\n\t\t}, 100);\n\t};\n\n\tsetSize = () => {\n\t\tif (this.containerRef) {\n\t\t\tconst { clientHeight, clientWidth } = this.containerRef;\n\t\t\tthis.setState({ height: clientHeight, width: clientWidth });\n\t\t}\n\t};\n\n\tsetRef = (ref: HTMLDivElement) => {\n\t\tthis.containerRef = ref;\n\t\tthis.setSize();\n\t};\n\n\tbindOrUnbindResize = (type: \"bind\" | \"unbind\") => {\n\t\tconst listener = type === \"bind\" ? window.addEventListener : window.removeEventListener;\n\t\tlistener(\"resize\", this.listenResize, false);\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.bindOrUnbindResize(\"bind\");\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.bindOrUnbindResize(\"unbind\");\n\t}\n\n\trender() {\n\t\tconst { className, style, children } = this.props;\n\t\tconst { width, height } = this.state;\n\t\treturn (\n\t\t\t<div className={className} style={style} ref={this.setRef}>\n\t\t\t\t{children({ width, height })}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default AutoSizer;\n","import React from \"react\";\n\nimport styles from \"./index.scss\";\nimport Header from \"./Header\";\nimport UserTable from \"./UserTable\";\nimport AutoSizer from \"@Components/AutoSizer\";\n\nexport default function Users() {\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Header />\n\t\t\t<AutoSizer className={styles.tableBox}>{({ height }) => <UserTable scrollY={height - 120} />}</AutoSizer>\n\t\t</div>\n\t);\n}\n"],"sourceRoot":""}